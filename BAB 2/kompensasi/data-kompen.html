<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#1885ed">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <title>Data Kompensasi - Sakura.id</title>
    <link rel="stylesheet" href="../css/stylee.css">
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container header__container">
            <div class="header__logo">
                <a href="../index.html">
                    <img src="../assets/logoweb.png" alt="">
                </a>
            </div>
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <div class="header__menu">
                <nav id="navbar" class="header__nav collapse">
                    <ul class="header__elenco">
                        <li class="header__el"><a href="../index.html" class="header__link">Home</a></li>
                        <li class="header__el"><a href="../kompensasi/data-kompen.html" class="header__link">Data Kompensai</a></li>
                        <li class="header__el"><a href="../total/data-total.html" class="header__link">Data Total</a></li>
                        <li class="header__el"><a href="#contactus" class="header__link">Contact us</a></li>
                        <li class="header__el header__el--blue"><a href="login.html" class="btn btn--white">Login →</a></li>
                        <li class="header__el header__el--blue"><a href="register.html" class="btn btn--white">Sign In →</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    <div class="table-container__datkom">
        <h1>Data Kompensasi</h1>

        <!-- Daftar data kompen -->
        <table id="listKompen">
            <thead>
                <tr>
                    <th>Nama Pegawai</th>
                    <th>Jabatan Pegawai</th>
                    <th>ID Pegawai</th>
                    <th>Jenis Kompensasi</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data akan ditampilkan di sini -->
            </tbody>
        </table>

        <div class="btn-container__datkom">
            <button class="btn__datkom" onclick="goToEntryKompen()">Tambah Data</button>
        </div>
    </div>

    <!-- Pop-up container -->
    <div id="editPopupContainer" class="popup-container__datkom">
        <!-- Pop-up form untuk edit data -->
        <div id="editPopup" class="popup__datkom">
            <h2>Edit Data Kompen</h2>
            <form id="editForm">
                <input type="text" id="editNama" placeholder="Nama Pegawai"><br>
                <input type="text" id="editJabatan" placeholder="Jabatan Pegawai"><br>
                <input type="text" id="editId" placeholder="ID Pegawai"><br>
                <input type="text" id="editJenis" placeholder="Jenis Kompensasi"><br>
                <button type="submit" class="btn">Simpan</button><br><br>
            </form>
        </div>
    </div>

    <script>
        // Ambil data yang dikirim dari halaman entry-kompen.html
        function goToEntryKompen() {
            window.location.href = 'kompen-entry.html';
        }

        function editData(btn) {
            var row = btn.parentNode.parentNode;
            var cells = row.getElementsByTagName("td");
            document.getElementById("editNama").value = cells[0].textContent;
            document.getElementById("editJabatan").value = cells[1].textContent;
            document.getElementById("editId").value = cells[2].textContent;
            document.getElementById("editJenis").value = cells[3].textContent;
            // Tampilkan pop-up container
            document.getElementById("editPopupContainer").style.display = "flex";
            // Simpan row untuk referensi saat menyimpan data
            document.getElementById("editPopupContainer").row = row;
        }

        function deleteData(btn) {
            if (confirm("Apakah Anda yakin ingin menghapus data ini?")) {
                var row = btn.parentNode.parentNode;
                row.parentNode.removeChild(row);
                // Implementasi kode untuk menghapus data dari penyimpanan atau sumber data yang digunakan (misalnya database)
            }
        }

        // Handle submit form edit
        document.getElementById("editForm").onsubmit = function(event) {
            event.preventDefault();
            var row = document.getElementById("editPopupContainer").row;
            var cells = row.getElementsByTagName("td");
            cells[0].textContent = document.getElementById("editNama").value;
            cells[1].textContent = document.getElementById("editJabatan").value;
            cells[2].textContent = document.getElementById("editId").value;
            cells[3].textContent = document.getElementById("editJenis").value;
            // Tutup pop-up container setelah disimpan
            document.getElementById("editPopupContainer").style.display = "none";
            // Implementasi kode untuk menyimpan data ke penyimpanan atau sumber data yang digunakan (misalnya database)
        };

        // Tambah function untuk menyimpan data baru
        function saveNewData(newData) {
            var table = document.getElementById("listKompen");
            var newRow = table.insertRow();
            var cell1 = newRow.insertCell(0);
            var cell2 = newRow.insertCell(1);
            var cell3 = newRow.insertCell(2);
            var cell4 = newRow.insertCell(3);
            var cell5 = newRow.insertCell(4);
            cell1.textContent = newData.nama;
            cell2.textContent = newData.jabatan;
            cell3.textContent = newData.id;
            cell4.textContent = newData.jenis;
            cell5.innerHTML = '<button onclick="editData(this)">Edit</button><button onclick="deleteData(this)">Hapus</button>';
        }

        // Ambil data yang dikirim dari halaman entry-kompen.html
        var newData = JSON.parse(localStorage.getItem('newData'));
        if (newData) {
            saveNewData(newData);
            // Bersihkan data yang sudah ditampilkan agar tidak ditampilkan kembali saat reload
            localStorage.removeItem('newData');
        }

    </script>
</body>
</html>
